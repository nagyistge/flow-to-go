// Type definitions for node-red <https://github.com/node-red/node-red>
// Project: node-red
// Definitions by: shortsn <https://github.com/shortsn>

import { Server } from 'http';
import { RequestHandler } from 'express';

/**
 * Initialises Node-RED
 */
export function init(httpServer: Server, userSettings: UserSettings): void;
/**
 * Start Node-RED
 */
export function start(): Promise<void>;
/**
 * Stop Node-RED
 */
export function stop(): Promise<void>;
/**
 * Returns the version
 */
export function version(): string;
/**
 * The admin express application
 */
export const httpAdmin: RequestHandler;
/**
 * The node express application
 */
export const httpNode: RequestHandler;
/**
 * The http server instance
 */
export const server: Server;
/**
 * 
 */
export const log: Log;

export const nodes: any;
export const settings: any;
export const util: any;
export const comms: any;
export const library: any;

export interface Log {
  FATAL: number,
  ERROR: number,
  WARN: number,
  INFO: number,
  DEBUG: number,
  TRACE: number,
  AUDIT: number,
  METRIC: number,

  log: (msg: { level: number, msg: string }) => void;
  info: (msg: string) => void;
  warn: (msg: string) => void;
  error: (msg: string) => void;
  trace: (msg: string) => void;
  debug: (msg: string) => void;
}

export interface UserSettings {
  /**
   * the file used to store the flows. Default: flows_<hostname>.json
   */
  flowFile?: string;
  /**
   * currently only console logging is supported. Various levels of logging can be specified. Options are:
   * fatal - only those errors which make the application unusable should be recorded
   * error - record errors which are deemed fatal for a particular request + fatal errors
   * warn - record problems which are non fatal + errors + fatal errors
   * info - record information about the general running of the application + warn + error + fatal errors
   * debug - record information which is more verbose than info + info + warn + error + fatal errors
   * trace - record very detailed logging + debug + info + warn + error + fatal errors
   * The default level is info. For embedded devices with limited flash storage you may wish to set this to fatal to minimise writes to “disk”.
   */
  logging?: {
    console: {
      level?: 'fatal' | 'error' | 'warn' | 'info' | 'debug' | 'trace';
      metrics?: boolean;
      audit?: boolean;
    }
  };
    /**
   * the interface to listen for connections on. Default: 0.0.0.0 - all IPv4 interfaces.
   * Standalone only.
   */
  uiHost?: string;
  /**
   * the port used to serve the editor UI. Default: 1880.
   * Standalone only.
   */
  uiPort?: number;
  /**
   * the root url for the editor UI. If set to false, all admin endpoints are disabled. This includes both API endpoints and the editor UI. To disable just the editor UI, see the disableEditor property below. Default: /
   */
  httpAdminRoot?: string;
  /**
   * the root url for nodes that provide HTTP endpoints. If set to false, all node-based HTTP endpoints are disabled. Default: /
   */
  httpNodeRoot?: string;

  httpUIRoot?: string;
  /**
   * the directory to store all user data, such as flow and credential files and all library data. Default: $HOME/.node-red
   */
  userDir?: string;
  /**
   * a directory to search for additional installed nodes. Node-RED searches the nodes directory under the userDir directory. This property allows an additional directory to be searched, so that nodes can be installed outside of the Node-RED install structure. Default: $HOME/.node-red/nodes
   */
  nodesDir?: string;
  coreNodesDir?: string;
  

  functionGlobalContext?: {};
}
